<!-- components/custom-hr/custom-hr.vue -->
<template>
  <view
    class="custom-hr"
    :style="{ marginTop: margin, marginBottom: margin }"
  >
    <!-- æ¨ªçº¿ -->
    <view class="line" :style="{ borderColor: color }">
      <!-- å°ç¬¦å· -->
      <text
        class="symbol"
        :style="{ left: symbolLeft + '%', color: color }"
        @tap="onTap"
      >
        {{ showSymbol }}
      </text>
    </view>

    <!-- å³ä¾§æ–‡å­— -->
    <text class="hr-text" :style="{ color: color }">{{ content }}</text>
  </view>
</template>

<script lang="ts" setup>
import { ref } from 'vue'

/* å°ç¨‹åº pages.json é‡Œéœ€æ‰“å¼€ "usingComponents": true ä¸”ä½¿ç”¨ Vue3 ç¼–è¯‘æ¨¡å¼ */
const props = defineProps({
  margin: { type: String, default: '40px' },
  symbol: { type: String, default: '1' },
  content: { type: String, default: '' },
  color:   { type: String, default: '#409eff' }   /* é»˜è®¤ç”¨ uni-blue */
})

/* ç¬¦å·æ˜ å°„è¡¨ */
const symbolMap = {
  '1': 'â„',
  '2': 'â€',
  '3': 'â˜¯',
  '4': 'â™•',
  '5': 'ğ„'
}

/* å½“å‰è¦æ˜¾ç¤ºçš„ç¬¦å· */
const showSymbol = symbolMap[props.symbol] || symbolMap['1']

/* ç¬¦å·è·ç¦»å·¦è¾¹çš„ç™¾åˆ†æ¯”ï¼Œç‚¹å‡»åæ»‘åˆ° 95% */
let symbolLeft = ref(5)
function onTap() {
  symbolLeft.value = 95
}
</script>

<style scoped>
/* æœ€å¤–å±‚ */
.custom-hr {
  display: flex;
  flex-direction: column;
  padding: 0 20rpx;
}

/* æ¨ªçº¿å®¹å™¨ */
.line {
  position: relative;
  height: 2rpx;
  border-style: dashed;
  border-width: 2rpx 0 0 0;
  margin: 20rpx 0;
}

/* å°ç¬¦å· */
.symbol {
  position: absolute;
  top: -14rpx;
  font-size: 30rpx;
  line-height: 1;
  transition: left 1s ease-in-out;
}

/* å³ä¾§æ–‡å­— */
.hr-text {
  margin-left: 5%;
  font-size: 30rpx;
  font-style: italic;
  font-weight: bold;
  margin-bottom: 20rpx;
}
</style>